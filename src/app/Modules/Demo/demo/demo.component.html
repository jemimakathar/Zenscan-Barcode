<div class="demo-container">
  <!-- Navigation Bar -->
  <nav class="navbar">
    <ul>
      <li (click)="showCategorySection()">Category</li>
      <li (click)="showProductSection()">Product</li>
    </ul>
  </nav>

  <!-- Category Section -->
  <div class="category-section" *ngIf="showCategory">
    <img src="/assets/plus.png" alt="plus" (click)="toggleAddCategoryForm()" class="plus-icon">
    <h2>Categories</h2>
    <div class="category-grid">
      <div class="category-card" *ngFor="let category of categories">
        <div class="category-details">
          <h3>{{ category.data.categoryName }}</h3>
          <p class="barcode-type">{{ category.data.barcodeType }}</p>
        </div>
        <div class="category-actions">
          <button (click)="viewProductsByCategory(category.data.categoryName)">View Products</button>
        </div>
      </div>
    </div>
  
    <!-- Add Category Form -->
    <div *ngIf="showAddCategoryForm" class="form-overlay">
      <div class="form-container">
        <a (click)="toggleAddCategoryForm()" class="cancel">X</a>
        <h3>Add New Category</h3>
        <div class="form-group">
          <label for="newCategoryName">Category Name</label>
          <input id="newCategoryName" [(ngModel)]="newCategoryName" placeholder="Category Name">
        </div>
        <div class="form-group">
          <label for="newCategoryBarcodeType">Barcode Type</label>
          <select id="newCategoryBarcodeType" [(ngModel)]="newCategoryBarcodeType" (change)="generateBarcodePreview()">
            <option value="ean13">EAN-13</option>
            <option value="code128">Code 128</option>
            <option value="upca">UPC-A</option>
            <option value="ean8">EAN-8</option>
          </select>
        </div>
        <div class="form-group">
          <label for="newCategorySize">Size</label>
          <select id="newCategorySize" [(ngModel)]="newCategorySize" (change)="generateBarcodePreview()">
            <option value="small">Small</option>
            <option value="medium">Medium</option>
            <option value="large">Large</option>
          </select>
        </div>
        <div class="form-group">
          <label for="newCategoryColor">Color</label>
          <input type="color" id="newCategoryColor" [(ngModel)]="newCategoryColor" (change)="generateBarcodePreview()">
        </div>
        <div class="barcode-preview" [ngClass]="barcodePreview" *ngIf="barcodePreviewUrl">
          <p>Barcode Preview:</p>
          <img [src]="barcodePreviewUrl" alt="Barcode Preview"/>
        </div>
        <div class="form-actions">
          <button (click)="addCategory(newCategoryName, newCategoryBarcodeType)">Add Category</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Section -->
  <div class="product-section" *ngIf="showProduct">
    <img src="/assets/plus.png" alt="plus" (click)="toggleAddProductForm()" class="plus-icon">
    <h2>Products</h2>
    <div class="product-grid">
      <div class="product-card" *ngFor="let product of isFiltered ? filteredProducts : products">
        <div class="product-image">
          <img [src]="product.data.barcodeUrl" alt="Barcode Preview" />
        </div>
        <div class="product-details">
          <h3>{{ product.data.productName }}</h3>
          <p class="price">${{ product.data.productPrice }}</p>
          <p class="quantity">{{ product.data.quantity }} in stock</p>
        </div>
        <div class="product-actions">
          <button (click)="deleteProduct(product._id)">Delete</button>
          <button (click)="selectProductForUpdate(product._id)">Edit</button>
        </div>
      </div>
    </div>

    <!-- Update Product Form -->
    <div *ngIf="selectedProduct" class="form-overlay">
      <div class="form-container">
        <a (click)="selectedProduct = null" class="cancel">X</a>
        <h3>Update Product</h3>
        <div class="form-group">
          <label for="updatedProductName">Product Name</label>
          <input id="updatedProductName" [(ngModel)]="updatedProductName" placeholder="Product Name">
        </div>
        <div class="form-group">
          <label for="updatedProductPrice">Price</label>
          <input id="updatedProductPrice" [(ngModel)]="updatedProductPrice" type="number" placeholder="Price">
        </div>
        <div class="form-group">
          <label for="updatedProductDescription">Description</label>
          <input id="updatedProductDescription" [(ngModel)]="updatedProductDescription" placeholder="Description">
        </div>
        <div class="form-group">
          <label for="updatedProductQuantity">Quantity</label>
          <input id="updatedProductQuantity" [(ngModel)]="updatedProductQuantity" type="number" placeholder="Quantity">
        </div>
        <div class="form-group">
          <label for="updatedProductCategory">Category</label>
          <select id="updatedProductCategory" [(ngModel)]="updatedProductCategory">
            <option value="">Select Category</option>
            <option *ngFor="let category of categories" [value]="category.data.categoryName">{{ category.data.categoryName }}</option>
          </select>
        </div>
        <div class="form-actions">
          <button (click)="updateProduct()">Update Product</button>   
        </div>
      </div>
    </div>

    <!-- Add Product Form -->
    <div *ngIf="showAddProductForm" class="form-overlay">
      <div class="form-container">
        <a (click)="toggleAddProductForm()" class="cancel">X</a>
        <h3>Add Product</h3>
        <div class="form-group">
          <label for="newProductName">Product Name</label>
          <input id="newProductName" [(ngModel)]="newProductName" placeholder="Product Name">
        </div>
        <div class="form-group">
          <label for="newProductPrice">Price</label>
          <input id="newProductPrice" [(ngModel)]="newProductPrice" type="number" placeholder="Price" min="1">
        </div>
        <div class="form-group">
          <label for="newProductDescription">Description</label>
          <input id="newProductDescription" [(ngModel)]="newProductDescription" placeholder="Description">
        </div>
        <div class="form-group">
          <label for="newProductQuantity">Quantity</label>
          <input id="newProductQuantity" [(ngModel)]="newProductQuantity" type="number" placeholder="Quantity">
        </div>
        <div class="form-group">
          <label for="newProductCategory">Category</label>
          <select id="newProductCategory" [(ngModel)]="newProductCategory" (change)="onCategoryChange()">
            <option value="">Select Category</option>
            <option *ngFor="let category of categories" [value]="category.data.categoryName">{{ category.data.categoryName }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="newProductBarcodeType">Barcode Type</label>
          <input id="newProductBarcodeType" [(ngModel)]="newProductBarcodeType" placeholder="Barcode Type" readonly>
        </div>
        <div class="form-actions">
          <button (click)="addProduct(newProductName, newProductPrice, newProductDescription, newProductQuantity, newProductCategory)">Add Product</button>
        </div>
      </div>
    </div>
  </div>
</div>